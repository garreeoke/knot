{
    "apiVersion": "extensions/v1beta1",
    "kind": "Deployment",
    "metadata": {
        "name": "heapster-apl",
        "namespace": "kube-system"
    },
    "spec": {
        "replicas": 1,
        "template": {
            "metadata": {
                "labels": {
                    "task": "monitoring",
                    "k8s-app": "heapster",
                    "version": "v6",
                    "owner": "applariat"
                }
            },
            "spec": {
                "volumes": [{
                        "name": "ssl-certs",
                        "hostPath": {
                            "path": "/etc/ssl/certs"
                        }
                    },
                    {
                        "name": "usr-ca-certs",
                        "hostPath": {
                            "path": "/usr/share/ca-certificates"
                        }
                    }
                ],
                "containers": [{
                        "image": "gcr.io/google_containers/heapster-amd64:v1.3.0",
                        "name": "heapster",
                        "livenessProbe": {
                            "httpGet": {
                                "path": "/healthz",
                                "port": 8082,
                                "scheme": "HTTP"
                            },
                            "initialDelaySeconds": 180,
                            "timeoutSeconds": 5
                        },
                        "command": [
                            "/heapster",
                            "--source=kubernetes:https://kubernetes.default",
                            "--sink=influxdb:http://monitoring-influxdb:8086"
                        ],
                        "volumeMounts": [{
                                "name": "ssl-certs",
                                "mountPath": "/etc/ssl/certs",
                                "readOnly": true
                            },
                            {
                                "name": "usr-ca-certs",
                                "mountPath": "/usr/share/ca-certificates",
                                "readOnly": true
                            }
                        ]
                    },
                    {
                        "image": "gcr.io/google_containers/heapster-amd64:v1.3.0",
                        "name": "eventer",
                        "command": [
                            "/eventer",
                            "--source=kubernetes:''"
                        ],
                        "volumeMounts": [{
                            "name": "ssl-certs",
                            "mountPath": "/etc/ssl/certs",
                            "readOnly": true
                        }, {
                            "name": "usr-ca-certs",
                            "mountPath": "/usr/share/ca-certificates",
                            "readOnly": true
                        }]
                    }
                ]
            }
        }
    }
}