{
  "apiVersion": "extensions/v1beta1",
  "kind": "Deployment",
  "metadata": {
    "name": "heapster-apl",
    "namespace": "kube-system"
  },
  "spec": {
    "replicas": 1,
    "template": {
      "metadata": {
        "labels": {
          "task": "monitoring",
          "k8s-app": "heapster",
          "version": "v1.3-beta.0",
          "owner": "applariat"
        }
      },
      "spec": {
        "containers": [
           {
            "image": "gcr.io/google_containers/heapster-amd64:v1.3.0-beta.1",
            "name": "heapster",
            "imagePullPolicy": "Always",
            "livenessProbe": {
              "httpGet": {
                "path": "/healthz",
                "port": 8082,
                "scheme": "HTTP"
              },
              "initialDelaySeconds": 180,
              "timeoutSeconds": 5
            },
            "command": [
              "/heapster",
              "--source=kubernetes.summary_api:''",
              "--sink=influxdb:http://monitoring-influxdb:8086"
            ]
          },
          {
            "image": "gcr.io/google_containers/heapster-amd64:v1.3.0-beta.1",
            "imagePullPolicy": "Always",
            "name": "eventer",
            "command": [
              "/eventer",
              "--source=kubernetes:''",
              "--sink=influxdb:http://monitoring-influxdb:8086"
            ]
          }
        ]
      }
    }
  }
}
